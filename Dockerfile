########################################################################################################################

FROM amazoncorretto:11-alpine

########################################################################################################################

LABEL maintainer="Jérôme ODIER <odier.jerome@lpsc.in2p3.fr>"

LABEL description="AMI Exclusion Server"

########################################################################################################################

RUN ["wget", "-O", "AMIExclusionServer-bundle.zip", "https://ami.in2p3.fr/download/AMIExclusionServer-1.0.0-bundle.zip"]

RUN ["unzip", "AMIExclusionServer-bundle.zip"]

RUN ["rm", "AMIExclusionServer-bundle.zip"]

########################################################################################################################

RUN ["rmdir", "/AMIExclusionServer/logs/"]

########################################################################################################################

COPY docker-entrypoint.sh /docker-entrypoint.sh

RUN ["chmod", "a+x", "/docker-entrypoint.sh"]

########################################################################################################################

EXPOSE 1357

########################################################################################################################

WORKDIR /AMIExclusionServer/

########################################################################################################################

ENTRYPOINT ["/docker-entrypoint.sh"]

########################################################################################################################
